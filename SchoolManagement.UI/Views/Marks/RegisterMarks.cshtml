@model SchoolManagement.Core.Entites.Models.Marks

@{
    ViewData["Title"] = "Register Marks";
}

@* Display success or error messages *@
@if (TempData["Success"] != null)
{
    <div class="alert alert-success">@TempData["Success"]</div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<div class="container">
    <h2>Register Marks</h2>

    <form asp-action="RegisterMarks" method="post">
        @Html.AntiForgeryToken()

        <div class="form-group">
            <label asp-for="ClassId">Class</label>
            <select asp-for="ClassId" class="form-control" id="ClassId">
                <option value="">-- Select Class --</option>
                @if (ViewBag.Classes != null)
                {
                    foreach (var item in ViewBag.Classes as SelectList)
                    {
                        <option value="@item.Value">@item.Text</option>
                    }
                }
                else
                {
                    <option disabled>-- No classes available --</option>
                }
            </select>
        </div>

        <div class="form-group">
            <label asp-for="StudentId">Student</label>
            <select asp-for="StudentId" class="form-control" asp-items="@(ViewBag.Students != null ? new SelectList(ViewBag.Students, "Id", "FirstName") : new List<SelectListItem>())">
                <option value="">-- Select Student --</option>
            </select>
        </div>

        @if (ViewBag.Subject != null)
        {
            <div class="form-group">
                <label asp-for="SubjectId">Subject</label>
                <select asp-for="SubjectId" class="form-control" asp-items="@(ViewBag.Subject != null ? ViewBag.Subject : new List<SelectListItem>())">
                    <option value="">-- Select Subject --</option>
                </select>
            </div>
        }
        else
        {
            <div class="form-group">
                <label>Subject</label>
                <select class="form-control" disabled>
                    <option>-- No subjects available --</option>
                </select>
            </div>
        }

        <div class="form-group">
            <label asp-for="ExamId">Exam</label>
            <select asp-for="ExamId" class="form-control" asp-items="@(ViewBag.Exams != null ? new SelectList(ViewBag.Exams, "ExamId", "ExamName") : new List<SelectListItem>())">
                <option value="">-- Select Exam --</option>
            </select>
        </div>

        <div class="form-group">
            <label asp-for="MarksObtained">Marks Obtained</label>
            <input asp-for="MarksObtained" class="form-control" />
            <span asp-validation-for="MarksObtained" class="text-danger"></span>
        </div>

        <div class="form-group">
            <label asp-for="MaxMarks">Max Marks</label>
            <input asp-for="MaxMarks" class="form-control" />
            <span asp-validation-for="MaxMarks" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-primary">Register</button>
        <a asp-action="DisplayAllMarks" class="btn btn-secondary">Back</a>
    </form>

</div>

@section Scripts {
    <script src="~/js/marks.js" asp-append-version="true"></script>
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}